angular.element(document).ready(function(){angular.bootstrap(document.getElementById("header"),["header"]),angular.bootstrap(document.getElementById("slider"),["slider"]),angular.bootstrap(document.getElementById("info"),["info"]),angular.bootstrap(document.getElementById("programs"),["programs"]),angular.bootstrap(document.getElementById("howwework"),["howwework"]),angular.bootstrap(document.getElementById("portfolio"),["portfolio"]),angular.bootstrap(document.getElementById("tarif"),["tarif"]),angular.bootstrap(document.getElementById("reviews"),["reviews"]),angular.bootstrap(document.getElementById("form"),["form"]),angular.bootstrap(document.getElementById("toOrder"),["formSend"]),angular.bootstrap(document.getElementById("map"),["map"])});var form=angular.module("form",[]),formSend=angular.module("formSend",["ui.utils"]),header=angular.module("header",["duScroll"]).value("duScrollDuration",2e3).value("duScrollOffset",70),howwework=angular.module("howwework",[]),info=angular.module("info",[]),map=angular.module("map",[]),portfolio=angular.module("portfolio",["angular.filter"]),programs=angular.module("programs",["angular.filter","duScroll"]),reviews=angular.module("reviews",[]),slider=angular.module("slider",[]),tarif=angular.module("tarif",["duScroll"]);form.controller("formController",function($scope,$http){$http.get("siteParam/form.json").success(function(data){$scope.param=data.param,$scope.user={}})}),formSend.controller("formSendController",function($scope,$http,$location){$scope.user={},$scope.submit=function(){if($scope.form.$valid){{$location.absUrl()}$.post("sendMail.php",$scope.user,function(data,status){"success"==status?($("#send-form-ok").addClass("active").siblings().removeClass("active"),$("#toOrder").removeClass("active")):$("#send-form-err").addClass("active").siblings().removeClass("active")})}}}),header.controller("headerController",function($scope,$http,$document){$http.get("siteParam/header.json").success(function(data){$scope.menu=data.menu,$scope.logo=data.logo;$scope.toTheTop=function(){$document.scrollTop(0,5e3)}})}),howwework.controller("howweworkController",function($scope,$http){$http.get("siteParam/howWeWork.json").success(function(data){$scope.param=data.param,$scope.programs=data.programs,$(window).scroll(function(){$("#howwework").each(function(){var imagePos=$(this).offset().top,topOfWindow=$(window).scrollTop(),calc2=imagePos/topOfWindow;1.1>calc2&&$(this).addClass("fadeIn")})})})}),info.controller("infoController",function($scope,$http){$http.get("siteParam/info.json").success(function(data){$scope.info=data.info})}),map.controller("mapController",function($scope){$("#show-hide").click(function(event){var classN=$(this).hasClass("show"),classM=$("#mapcode");classN?($(this).removeClass("show").html("Показать карту"),$(classM).removeClass("active")):($(this).addClass("show").html("Скрыть карту"),$(classM).addClass("active"))})}),portfolio.controller("portfolioController",function($scope,$http){$http.get("siteParam/portfolio.json").success(function(data){$scope.filter=data.filter,$scope.param=data.param,$scope.works=data.works,$scope.filterWorks=function(item){var works=angular.element(document.querySelector(".portfolio__works")).children(),itemFilter=angular.element(document.getElementById(item));itemFilter.addClass("active").siblings().removeClass("active"),angular.forEach(works,function(value,key){var id=angular.element(value).attr("data-work");angular.element(value).hide(500),"all"==item&&angular.element(value).show(300),id==item&&angular.element(value).show(300)})}})}),programs.controller("programsController",function($scope,$http){$http.get("siteParam/programs.json").success(function(data){$scope.param=data.param,$scope.programs=data.programs,$(window).scroll(function(){$("#programs").each(function(){var imagePos=$(this).offset().top,topOfWindow=$(window).scrollTop(),calc=imagePos/topOfWindow;1.5>calc&&$(this).addClass("fadeIn")})}),$scope.modal=function(item){$scope.item={},$scope.modalLink="modalLink",$scope.item=item,$("#modal").toggleClass("active"),$("#mask").toggleClass("active").click(function(event){$("#modal").removeClass("active"),$(this).removeClass("active")}),$("#modalL").click(function(event){$("#modal").removeClass("active"),$("#mask").removeClass("active")})}})}),reviews.controller("reviewsController",function($scope,$http){$http.get("siteParam/reviews.json").success(function(data){$scope.param=data.param,$scope.reviews=data.reviews,$scope.reviewsClick=function(item){var reviewsList=angular.element(document.querySelector(".wrapper--reviews-list")).children(),reviewsUser=angular.element(document.querySelector(".wrapper--reviews-users")).children();angular.forEach(reviewsUser,function(value,key){var id=angular.element(value).attr("data-iduser");id==item&&angular.element(value).toggleClass("active").siblings().removeClass("active")}),angular.forEach(reviewsList,function(value,key){var id=angular.element(value).attr("data-idreview");id==item&&angular.element(value).toggleClass("active").siblings().removeClass("active")})}})}),slider.controller("sliderController",function($scope,$http){$http.get("siteParam/slider.json").success(function(data){$scope.params=data.params,$scope.slides=data.slides;var hwSlideSpeed=$scope.params.speed,hwTimeOut=$scope.params.timeout,hwNeedLinks=$scope.params.controls;jQuery(".slide").hide().eq(0).show();var slideTime,slideNum=0,slideCount=$scope.slides.length,animSlide=function(arrow){clearTimeout(slideTime),jQuery(".slide").eq(slideNum).fadeOut(hwSlideSpeed),"next"==arrow?slideNum==slideCount-1?slideNum=0:slideNum++:"prev"==arrow?0==slideNum?slideNum=slideCount-1:slideNum-=1:slideNum=arrow,jQuery(".slide").eq(slideNum).fadeIn(hwSlideSpeed,rotator)};if(hwNeedLinks){{$('<span id="prevbutton" class="button button--prevbutton"></span><span id="nextbutton" class="button button--nextbutton"></span>').prependTo("#slider-wrap")}$("#nextbutton").click(function(){animSlide("next")}),$("#prevbutton").click(function(){animSlide("prev")})}var pause=!1,rotator=function(){pause||(slideTime=setTimeout(function(){animSlide("next")},hwTimeOut))};jQuery("#slider").hover(function(){clearTimeout(slideTime),pause=!0},function(){pause=!1,rotator()}),rotator()})}),tarif.controller("tarifController",function($scope,$http,$document){$http.get("siteParam/tarif.json").success(function(data){$scope.tarif=data.tarif,$(window).scroll(function(){$("#tarif").each(function(){var imagePos=$(this).offset().top,topOfWindow=$(window).scrollTop(),calc3=imagePos/topOfWindow;1.1>calc3&&$(this).addClass("fadeIn")})}),$scope.goToForm=function(item){var setwork=angular.element(document.getElementById("setwork"));setwork.val(item)}})});